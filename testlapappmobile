بسم الله الرحمن الرحيم


السلام عليكم ورحمة الله وبركاته



موضوع اليوم بيكون بعيد عن تعريف المصطلحات تقدر تلقى
المصطلحات وتعريفها ومعناها مفصل في محرك البحث قوقل 
لاختصار الوقت سيتم شرح الجانب العملي لطريقة اعداد لاب
لاختبار اختراق تطبيقات الجوال بشكل الي وبدون اي تعقيد
ينفع لكل شخص ما عنده خبره في المجال ان تكون هالمقالة
بدايته في تطبيقات الجوال الخاصة بالاندرويد لكن طبعا
تبقى الافضلية لليدوي نهاية المقالة بشرح في ايش استفدت
من تحليل تطبيقات الجوال وعلاقته في اختبار تطبيقات الويب
طبعا تبقى اكثر مشاكل تطبيقات الجوال Root Detection بالاضافة
الى SSLPinning لكن اليوم راح نتخطاها بشكل الي باستخدام
اداة frida لكن كل هذا بيكون بشكل مبسط




مراحل المقالة :

1- التثبيت وتعديل الاعدادت
2- عمل تحليل static analyzer
3 - تثبيت نظام الاندرويد الوهمي وتعديل الاعدادت
4- ربط المشروع بالنظام الوهمي وحل خطأ شائع
5- عمل تحليل Dynamic Analysis
6 - تجارب شخصية استفدت منها من التحليل السريع



طبعا نحتاج نظام وهمي للاندرويد مثل (Genymotion او NOX )

https://www.bignox.com/
https://www.genymotion.com/

انا حملت https://www.bignox.com/

بالاضافة الى تحميل مشروعنا الجبار والسريع 
Mobile Security Framework (MobSF) 

طبعا يحلل اكثر من نوع تطبيق لكن نحنا نحتاج نركز على الاندرويد
المشروع عبارة عن عمل Root Detection وSSLPinning وتثبيت
frida  و apktool ويستخرج التطبيق على شكل جافا سورس او لغة smli

رابط تحميل المشروع
https://github.com/MobSF/Mobile-Security-Framework-MobSF

بعد تحميل المشروع نحتاج نعمل تعديل للاعدادت بسيط نحرر هالملف
\Mobile-Security-Framework-MobSF-master\MobSF\MobSF\settings.py

ونبحث عن ANDROID DYNAMIC ANALYSIS SETTINGS

اذا كنت محمل nox عدل 

ANALYZER_IDENTIFIER = '127.0.0.1:62001'
واذا كنت محمل 
genymotion البورت بيكون

5555 and 5554

الان متطلبات التثبيت 
Windows:

1-  تثبيت Git
https://git-scm.com/download/win

2 - بايثون الاصدار
 Python 3.8-3.9 واذا واجهت اخطاء في نزل بايثون 3.7 

3- جافا الاصدار الثامن
https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html

4-Microsoft Visual C++ Build Tools

https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=BuildTools&rel=16

5-  OpenSSL
https://slproweb.com/products/Win32OpenSSL.html

6- ونحتاج تثبيت  wkhtmltopdf لاجل التقارير تطلع بشكل مرتب
https://wkhtmltopdf.org/downloads.html

7- ونحتاج نضيف wkhtmltopdf الى
 environment variable 

8 - نعمل bat.setup
واذا واجهت مشكلة نثبت المكتبات بشكل يدوي بالامر
pip install -r requirements.txt

التثبيت على 
Ubuntu/Debian based Linux:

sudo apt-get install git

sudo apt-get install python3.8

sudo apt-get install openjdk-8-jdk

sudo apt install python3-dev python3-venv python3-pip build-essential libffi-dev libssl-dev libxml2-dev libxslt1-dev libjpeg8-dev zlib1g-dev wkhtmltopdf



./setup.sh


خلصنا تثبيت ؟ الا هيا اصعب مرحلة متخيلين ؟


طبعا المشروع يحلل تطبيقات الايفون لكن تشتغل فقط على لينكس او ماك تحليلها


المهم نكمل الان ونشغل المشروع وبعدها نفتح المتصفح على العنوان التالي :
http://127.0.0.1:8000/
1img


بكل بساطة نختار اي تطبيق ونرفعه وبشكل الي يتم تحليله ؟!!!

2img
static analyzer

من وين نحمل تطبيقات من هالرابط مثال وقوقل ما يقصر بعد

https://apkcombo.com/

راح نحمل lab Diva
https://github.com/payatu/diva-android

رابط apk 
http://www.payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz


الان يتم تحليل التطبيق بشكل الي لاستخراج تقرير مفصل عن التطبيق


طبعا موضوع دعم api  يختلف من اصدار اندرويد لاصدار ثاني ما ودنا نطلع من
موضوع التحليل بشكل الي ومبسط


الان ظهر لنا التقرير بالشكل التالي :

5img


طبعا تقرير مفصل بشكل بسيط مبروك عليك الان قدرت تحلل تطبيق بشكل مبدئي
واخذ فكرة عن طريقة عمله وملفاته

الان ننتقل للتحليل Dynamic Analysis

اول شئ الربط

نشغل النظام الوهمي  ونفعل الروت وهنا انا استخدم nox

6-1 img

الان في المشروع
نذهب لخيار Dynamic Analysis 

6img

ونضغط على MobSFy Android Runtime


7img 

ظهر الخطأ التالي اكثر خطا موجود في هالمشروع


اذا كنت على لينكس حمل adb

sudo apt-get install android-tools-adb

واذا كنت مستخدم ويندوز
https://developer.android.com/studio/releases/platform-tools

نكتب الامر التالي
adb connect 127.0.0.1:62001


ونرجع للصفحة نحدثها وبعدين نشغل مره ثانيه

8img

9img



تم بنجاح الاتصال

الان ندخل من المشروع على خيار

start dynamic analysis

10

11

Root Detection Bypass تتخطى الروت
SSL Pinning Bypass تتخطى موضوع الشهادة

حاولت قد ما اقدر اشرح التحليل وعمل هندسة عن طريق المشروع بابسط واسهل الطرق
الان كذا انتهينا من موضوع اعداد لاب وطريقة عمل تحليل 





كذا انتهينا من المقالة بالنسبة للخيارات والتقارير والبيانات الا فيها
واضحة والتعلم الذاتي دائما يرسخ المعلومات قد ما اقدر اعطيتكم المفاتيح
لاختبار اختراق تطبيقات الجوال اوقات هالتحليل السريع يفيد باشياء للامانة
غريبة وعجيبة مثال كنت اعمل اختبار اختراق لويب ابلكيشن لكن واجهة مشكلة
 ان السيرفر عليه لود بلنسر بالاضافة ان عليه فايرول وطبعا المعروف بالوقت
الحالي ان اضعف حلقة سكورتي في اغلبية الشركات تطبيق الجوال 

14

طبعا دائما لود بلنسر + جدار ناري يعني =:(:(:(  
فكر فكر فكر تطبيق الجوال نحلله بشكل سريع
 طيب النتيجة ايش كانت ؟

15


سب دومينات ما فيها لود بلنسر ولا جدار ناري
تتصل مباشرة بالويب ابلكيشن :):)  نقدر نختبر التطبيق الان بسهولة



وفيه امثلة كثيرة لكن للاسف بعضها مافي اي تصريح نتكلم عنها

باذن الله في مقالات ثانية واتمنى انه هذا المثال جرعة تحفيزية لكم





